// Code generated by girgen. DO NOT EDIT.

package gtk

import (
	"unsafe"

	"github.com/diamondburned/gotk4/internal/gextras"
	"github.com/diamondburned/gotk4/internal/ptr"
	"github.com/diamondburned/gotk4/pkg/gio/v2"
	externglib "github.com/gotk3/gotk3/glib"
)

// #cgo pkg-config:
// #cgo CFLAGS: -Wno-deprecated-declarations
// #include <stdbool.h>
// #include <glib-object.h>
// #include <gtk/gtk.h>
import "C"

func init() {
	externglib.RegisterGValueMarshalers([]externglib.TypeMarshaler{
		{T: externglib.Type(C.gtk_drop_down_get_type()), F: marshalDropDown},
	})
}

// DropDown: gtkDropDown is a widget that allows the user to choose an item from
// a list of options. The GtkDropDown displays the selected choice.
//
// The options are given to GtkDropDown in the form of Model, and how the
// individual options are represented is determined by a ListItemFactory. The
// default factory displays simple strings.
//
// GtkDropDown knows how to obtain strings from the items in a StringList; for
// other models, you have to provide an expression to find the strings via
// gtk_drop_down_set_expression().
//
// GtkDropDown can optionally allow search in the popup, which is useful if the
// list of options is long. To enable the search entry, use
// gtk_drop_down_set_enable_search().
//
//
// CSS nodes
//
// GtkDropDown has a single CSS node with name dropdown, with the button and
// popover nodes as children.
//
//
// Accessibility
//
// GtkDropDown uses the K_ACCESSIBLE_ROLE_COMBO_BOX role.
type DropDown interface {
	Widget
	Accessible
	Buildable
	ConstraintTarget

	// EnableSearch returns whether search is enabled.
	EnableSearch() bool
	// Expression gets the expression set with gtk_drop_down_set_expression().
	Expression() Expression
	// Factory gets the factory that's currently used to populate list items.
	//
	// The factory returned by this function is always used for the item in the
	// button. It is also used for items in the popup if DropDown:list-factory
	// is not set.
	Factory() ListItemFactory
	// ListFactory gets the factory that's currently used to populate list items
	// in the popup.
	ListFactory() ListItemFactory
	// Model gets the model that provides the displayed items.
	Model() gio.ListModel
	// Selected gets the position of the selected item.
	Selected() uint
	// SelectedItem gets the selected item. If no item is selected, nil is
	// returned.
	SelectedItem() gextras.Objector
	// SetEnableSearch sets whether a search entry will be shown in the popup
	// that allows to search for items in the list.
	//
	// Note that DropDown:expression must be set for search to work.
	SetEnableSearch(enableSearch bool)
	// SetExpression sets the expression that gets evaluated to obtain strings
	// from items when searching in the popup. The expression must have a value
	// type of TYPE_STRING.
	SetExpression(expression Expression)
	// SetFactory sets the ListItemFactory to use for populating list items.
	SetFactory(factory ListItemFactory)
	// SetListFactory sets the ListItemFactory to use for populating list items
	// in the popup.
	SetListFactory(factory ListItemFactory)
	// SetModel sets the Model to use.
	SetModel(model gio.ListModel)
	// SetSelected selects the item at the given position.
	SetSelected(position uint)
}

// dropDown implements the DropDown interface.
type dropDown struct {
	Widget
	Accessible
	Buildable
	ConstraintTarget
}

var _ DropDown = (*dropDown)(nil)

// WrapDropDown wraps a GObject to the right type. It is
// primarily used internally.
func WrapDropDown(obj *externglib.Object) DropDown {
	return DropDown{
		Widget:           WrapWidget(obj),
		Accessible:       WrapAccessible(obj),
		Buildable:        WrapBuildable(obj),
		ConstraintTarget: WrapConstraintTarget(obj),
	}
}

func marshalDropDown(p uintptr) (interface{}, error) {
	val := C.g_value_get_object((*C.GValue)(unsafe.Pointer(p)))
	obj := externglib.Take(unsafe.Pointer(val))
	return WrapDropDown(obj), nil
}

// NewDropDown constructs a class DropDown.
func NewDropDown(model gio.ListModel, expression Expression) DropDown {
	var arg1 *C.GListModel
	var arg2 *C.GtkExpression

	arg1 = (*C.GListModel)(unsafe.Pointer(model.Native()))
	arg2 = (*C.GtkExpression)(unsafe.Pointer(expression.Native()))

	var cret C.GtkDropDown
	var ret1 DropDown

	cret = C.gtk_drop_down_new(model, expression)

	ret1 = gextras.CastObject(externglib.Take(unsafe.Pointer(cret.Native()))).(DropDown)

	return ret1
}

// NewDropDownFromStrings constructs a class DropDown.
func NewDropDownFromStrings(strings []string) DropDown {
	var arg1 **C.char

	arg1 = C.malloc(len(strings) * (unsafe.Sizeof(int(0)) + 1))
	defer C.free(unsafe.Pointer(arg1))

	{
		var out []*C.char
		ptr.SetSlice(unsafe.Pointer(&dst), unsafe.Pointer(arg1), int(len(strings)))

		for i := range strings {
			out[i] = (*C.char)(C.CString(strings[i]))
			defer C.free(unsafe.Pointer(out[i]))
		}
	}

	var cret C.GtkDropDown
	var ret1 DropDown

	cret = C.gtk_drop_down_new_from_strings(strings)

	ret1 = gextras.CastObject(externglib.Take(unsafe.Pointer(cret.Native()))).(DropDown)

	return ret1
}

// EnableSearch returns whether search is enabled.
func (s dropDown) EnableSearch() bool {
	var arg0 *C.GtkDropDown

	arg0 = (*C.GtkDropDown)(unsafe.Pointer(s.Native()))

	var cret C.gboolean
	var ret1 bool

	cret = C.gtk_drop_down_get_enable_search(arg0)

	ret1 = C.bool(cret) != C.false

	return ret1
}

// Expression gets the expression set with gtk_drop_down_set_expression().
func (s dropDown) Expression() Expression {
	var arg0 *C.GtkDropDown

	arg0 = (*C.GtkDropDown)(unsafe.Pointer(s.Native()))

	var cret *C.GtkExpression
	var ret1 Expression

	cret = C.gtk_drop_down_get_expression(arg0)

	ret1 = gextras.CastObject(externglib.Take(unsafe.Pointer(cret.Native()))).(Expression)

	return ret1
}

// Factory gets the factory that's currently used to populate list items.
//
// The factory returned by this function is always used for the item in the
// button. It is also used for items in the popup if DropDown:list-factory
// is not set.
func (s dropDown) Factory() ListItemFactory {
	var arg0 *C.GtkDropDown

	arg0 = (*C.GtkDropDown)(unsafe.Pointer(s.Native()))

	var cret *C.GtkListItemFactory
	var ret1 ListItemFactory

	cret = C.gtk_drop_down_get_factory(arg0)

	ret1 = gextras.CastObject(externglib.Take(unsafe.Pointer(cret.Native()))).(ListItemFactory)

	return ret1
}

// ListFactory gets the factory that's currently used to populate list items
// in the popup.
func (s dropDown) ListFactory() ListItemFactory {
	var arg0 *C.GtkDropDown

	arg0 = (*C.GtkDropDown)(unsafe.Pointer(s.Native()))

	var cret *C.GtkListItemFactory
	var ret1 ListItemFactory

	cret = C.gtk_drop_down_get_list_factory(arg0)

	ret1 = gextras.CastObject(externglib.Take(unsafe.Pointer(cret.Native()))).(ListItemFactory)

	return ret1
}

// Model gets the model that provides the displayed items.
func (s dropDown) Model() gio.ListModel {
	var arg0 *C.GtkDropDown

	arg0 = (*C.GtkDropDown)(unsafe.Pointer(s.Native()))

	var cret *C.GListModel
	var ret1 gio.ListModel

	cret = C.gtk_drop_down_get_model(arg0)

	ret1 = gextras.CastObject(externglib.Take(unsafe.Pointer(cret.Native()))).(gio.ListModel)

	return ret1
}

// Selected gets the position of the selected item.
func (s dropDown) Selected() uint {
	var arg0 *C.GtkDropDown

	arg0 = (*C.GtkDropDown)(unsafe.Pointer(s.Native()))

	var cret C.guint
	var ret1 uint

	cret = C.gtk_drop_down_get_selected(arg0)

	ret1 = C.guint(cret)

	return ret1
}

// SelectedItem gets the selected item. If no item is selected, nil is
// returned.
func (s dropDown) SelectedItem() gextras.Objector {
	var arg0 *C.GtkDropDown

	arg0 = (*C.GtkDropDown)(unsafe.Pointer(s.Native()))

	var cret C.gpointer
	var ret1 gextras.Objector

	cret = C.gtk_drop_down_get_selected_item(arg0)

	ret1 = gextras.CastObject(externglib.Take(unsafe.Pointer(cret.Native()))).(gextras.Objector)

	return ret1
}

// SetEnableSearch sets whether a search entry will be shown in the popup
// that allows to search for items in the list.
//
// Note that DropDown:expression must be set for search to work.
func (s dropDown) SetEnableSearch(enableSearch bool) {
	var arg0 *C.GtkDropDown
	var arg1 C.gboolean

	arg0 = (*C.GtkDropDown)(unsafe.Pointer(s.Native()))
	if enableSearch {
		arg1 = C.gboolean(1)
	}

	C.gtk_drop_down_set_enable_search(arg0, enableSearch)
}

// SetExpression sets the expression that gets evaluated to obtain strings
// from items when searching in the popup. The expression must have a value
// type of TYPE_STRING.
func (s dropDown) SetExpression(expression Expression) {
	var arg0 *C.GtkDropDown
	var arg1 *C.GtkExpression

	arg0 = (*C.GtkDropDown)(unsafe.Pointer(s.Native()))
	arg1 = (*C.GtkExpression)(unsafe.Pointer(expression.Native()))

	C.gtk_drop_down_set_expression(arg0, expression)
}

// SetFactory sets the ListItemFactory to use for populating list items.
func (s dropDown) SetFactory(factory ListItemFactory) {
	var arg0 *C.GtkDropDown
	var arg1 *C.GtkListItemFactory

	arg0 = (*C.GtkDropDown)(unsafe.Pointer(s.Native()))
	arg1 = (*C.GtkListItemFactory)(unsafe.Pointer(factory.Native()))

	C.gtk_drop_down_set_factory(arg0, factory)
}

// SetListFactory sets the ListItemFactory to use for populating list items
// in the popup.
func (s dropDown) SetListFactory(factory ListItemFactory) {
	var arg0 *C.GtkDropDown
	var arg1 *C.GtkListItemFactory

	arg0 = (*C.GtkDropDown)(unsafe.Pointer(s.Native()))
	arg1 = (*C.GtkListItemFactory)(unsafe.Pointer(factory.Native()))

	C.gtk_drop_down_set_list_factory(arg0, factory)
}

// SetModel sets the Model to use.
func (s dropDown) SetModel(model gio.ListModel) {
	var arg0 *C.GtkDropDown
	var arg1 *C.GListModel

	arg0 = (*C.GtkDropDown)(unsafe.Pointer(s.Native()))
	arg1 = (*C.GListModel)(unsafe.Pointer(model.Native()))

	C.gtk_drop_down_set_model(arg0, model)
}

// SetSelected selects the item at the given position.
func (s dropDown) SetSelected(position uint) {
	var arg0 *C.GtkDropDown
	var arg1 C.guint

	arg0 = (*C.GtkDropDown)(unsafe.Pointer(s.Native()))
	arg1 = C.guint(position)

	C.gtk_drop_down_set_selected(arg0, position)
}
